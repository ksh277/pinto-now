# 🔑 서비스 계정 역할 추가하기 (상세 가이드)

## 🤔 왜 역할이 필요한가요?

역할 = 권한 = "이 계정이 뭘 할 수 있는지"를 정하는 것

```
GitHub Actions가 하고 싶은 일:
1. Cloud Run에 앱 배포 → Cloud Run 관리자 역할 필요
2. Docker 이미지 저장 → Storage 관리자 역할 필요  
3. 데이터베이스 연결 → Cloud SQL 클라이언트 역할 필요
4. 서비스 계정 사용 → 서비스 계정 사용자 역할 필요
```

## 📋 정확한 단계별 가이드

### Step 1: 서비스 계정 생성 화면에서
1. 서비스 계정 이름 입력 후 **"만들고 계속하기"** 클릭
2. **"이 서비스 계정에 프로젝트 액세스 권한 부여 (선택사항)"** 섹션이 나타남

### Step 2: 첫 번째 역할 추가
1. **"역할 선택"** 드롭다운 클릭
2. 검색창에 **"Cloud Run"** 입력
3. **"Cloud Run Admin"** 또는 **"Cloud Run 관리자"** 선택
4. **"다른 역할 추가"** 클릭 (중요!)

### Step 3: 두 번째 역할 추가  
1. 새로 나타난 **"역할 선택"** 드롭다운 클릭
2. 검색창에 **"Storage"** 입력
3. **"Storage Admin"** 또는 **"Storage 관리자"** 선택
4. **"다른 역할 추가"** 클릭

### Step 4: 세 번째 역할 추가
1. 또 새로 나타난 **"역할 선택"** 드롭다운 클릭
2. 검색창에 **"Cloud SQL"** 입력
3. **"Cloud SQL Client"** 또는 **"Cloud SQL 클라이언트"** 선택
4. **"다른 역할 추가"** 클릭

### Step 5: 네 번째 역할 추가
1. 마지막 **"역할 선택"** 드롭다운 클릭
2. 검색창에 **"Service Account"** 입력
3. **"Service Account User"** 또는 **"서비스 계정 사용자"** 선택

### Step 6: 완료
1. 총 4개 역할이 추가된 것을 확인
2. **"계속"** 클릭 → **"완료"** 클릭

## 🔍 역할을 정확히 찾는 팁

### 검색어와 정확한 역할 이름:

| 검색어 | 정확한 역할 이름 (한국어) | 정확한 역할 이름 (영어) |
|--------|------------------------|----------------------|
| "cloud run" | Cloud Run 관리자 | Cloud Run Admin |
| "storage" | Storage 관리자 | Storage Admin |
| "cloud sql" | Cloud SQL 클라이언트 | Cloud SQL Client |
| "service account" | 서비스 계정 사용자 | Service Account User |

## 🚨 자주 하는 실수들

### ❌ 실수 1: 비슷한 이름의 역할 선택
- **잘못된 예**: Cloud Run 개발자, Cloud Run 뷰어
- **올바른 예**: Cloud Run **관리자** (Admin)

### ❌ 실수 2: "다른 역할 추가" 안 누르기
- 역할 하나 추가한 후 **"다른 역할 추가"** 꼭 클릭해야 함
- 안 그러면 마지막 역할 하나만 저장됨

### ❌ 실수 3: 영어/한국어 버전 헷갈리기  
- Google Cloud 언어 설정에 따라 다를 수 있음
- **Admin** = **관리자**, **Client** = **클라이언트**

## 🛠️ 더 쉬운 방법: 기본 역할 사용

만약 위 방법이 너무 복잡하다면, 임시로 **강력한 역할 하나**를 사용할 수 있습니다:

### 임시 해결책:
1. **"역할 선택"** 드롭다운 클릭
2. **"편집자"** 또는 **"Editor"** 검색해서 선택
3. 이것만 선택하고 완료

⚠️ **주의**: 편집자 역할은 모든 권한을 주므로, 나중에 위의 4개 역할로 바꾸는 것을 권장합니다.

## 📱 모바일/작은 화면에서 어려울 때

1. **데스크톱 브라우저 사용** (Chrome, Edge 등)
2. **화면 줌 조정** (Ctrl + 마우스휠)
3. **브라우저 전체화면** (F11)

## 🔄 이미 만든 서비스 계정에 역할 추가하기

서비스 계정을 이미 만들었는데 역할을 빼먹었다면:

1. **IAM & Admin** → **IAM** (서비스 계정 말고)
2. 만든 서비스 계정 찾기 (`github-actions-sa@...`)
3. **연필 아이콘(편집)** 클릭
4. **"다른 역할 추가"**로 위의 4개 역할 추가

## ✅ 확인하는 방법

모든 역할이 제대로 추가되었는지 확인:

1. **IAM & Admin** → **IAM** 페이지 이동
2. 서비스 계정 이메일 (`github-actions-sa@...`) 찾기
3. **역할 칸**에 다음이 모두 보여야 함:
   - Cloud Run Admin
   - Storage Admin  
   - Cloud SQL Client
   - Service Account User

---

**🎯 핵심**: "다른 역할 추가" 버튼을 눌러서 총 4개 역할을 모두 추가하는 것이 포인트입니다!